window.contConteditor=new function(){function a(a){$.ajax({url:"?PX=plugins.contedit.edit&mode=api&method="+a.apiMethod,success:function(b){a.success(b),c.standby(a.standbyKey)},error:function(){alert(a.apiMethod+" ERROR.")}})}function b(){g=window.conteditUICanvas,h=$("#content",g.document),h.html("<p>開発中です。</p>"),$("a",g.document).each(function(){this.href="javascript:alert('編集中のため押せません。');",this.onclick="alert('編集中のため押せません。'); return false;"}),$("form",g.document).each(function(){this.action="javascript:alert('編集中のため送信できません。');",this.onsubmit="alert('編集中のため送信できません。'); return false;"});{var a=new c.cls.collections.documentModules([]);new c.cls.views.documentModules({collection:a})}for(var b in e.list)a.add(new c.cls.models.documentModule(e.list[b]));var d=new c.cls.collections.documentContents([]),i=new c.cls.views.documentContents({collection:d});for(var b in f)d.add(new c.cls.models.documentContent(f[b]));$("#content",g.document).html(i.render().el)}var c=this,d={canvas:!1,module_definitions:!1,document_contents:!1},e={},f=[],g=null,h=null;this.cls={collections:{},models:{},views:{}},this.standby=function(a){return d[a]=!0,this.isStandby()&&b(),!0},this.isStandby=function(){for(var a in d)if(!d[a])return!1;return!0},a({apiMethod:"get_module_definitions",standbyKey:"module_definitions",success:function(a){e=a}}),a({apiMethod:"get_document_contents",standbyKey:"document_contents",success:function(a){f=a}}),this.getModuleDefinitions=function(){return e}},function(a){a.cls.models.documentContent=Backbone.Model.extend({defaults:{key:null,category:null,id:null,name:"unknown"},initialize:function(){this.set("key",this.category+"/"+this.id)}}),a.cls.collections.documentContents=Backbone.Collection.extend({initialize:function(){console.log("-- document contents collection standby.")},model:a.cls.models.documentContent}),a.cls.views.documentContent=Backbone.View.extend({tagName:"li",initialize:function(){},events:{},toggle:function(){},destroy:function(){},remove:function(){},template:_.template("<p>TEST: <%- name %></p>"),render:function(){var a=this.template(this.model.toJSON());return this.$el.html(a),this}}),a.cls.views.documentContents=Backbone.View.extend({tagName:"ul",initialize:function(){},addNew:function(){},render:function(){return this.collection.each(function(b){var c=new a.cls.views.documentModule({model:b});this.$el.append(c.render().el)},this),this}})}(window.contConteditor),function(a){a.cls.models.documentModule=Backbone.Model.extend({defaults:{key:null,category:null,id:null,name:"unknown"},initialize:function(){this.set("key",this.category+"/"+this.id)}}),a.cls.collections.documentModules=Backbone.Collection.extend({initialize:function(){},model:a.cls.models.documentModule}),a.cls.views.documentModule=Backbone.View.extend({tagName:"li",initialize:function(){},events:{},toggle:function(){},destroy:function(){},remove:function(){},template:_.template("<%- name %>"),render:function(){var a=this.template(this.model.toJSON());return this.$el.html(a),this}}),a.cls.views.documentModules=Backbone.View.extend({tagName:"ul",initialize:function(){},addNew:function(){},render:function(){return this.collection.each(function(b){var c=new a.cls.views.documentModule({model:b});this.$el.append(c.render().el)},this),this}})}(window.contConteditor);